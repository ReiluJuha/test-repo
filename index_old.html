<!DOCTYPE html>
<html lang="fi" dir="ltr">
<head>
<title>Infrakit 2000</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="styles/layout.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>

var links; 
var isAlbum; 
var albumId;

<script type="text/javascript">
    var clientId = 'Client-ID 675ed2e4b9d8b2e';
	
	/*
var thehash = 'hsokB';
$.ajax({
      type: "GET",
      url: "https://api.imgur.com/3/gallery/" + thehash,
      dataType: "json",
      headers:{
      'Authorization':'Client-ID 675ed2e4b9d8b2e'
      },
      success: function(data) {
	  console.log("Ajax ssssssss SUCCESS");
       if(data.data.is_album === true) {
	     console.log(data.data.images[0].link );
        var dlength = data.data.images.length;
		  console.log(dlength);
        for(i=0; i < dlength; i++) {
         $('#mydiv').append('<li>' + data.data.images[i].link + '</li>');
         } 
       } else 
       {
        $('#mydiv').html('<li>' + data.data.link + '</li>');
       }      
        //console.log(data);            
      }
    });	*/
	
//	getAlbum("hsokB");
/*
  $.ajax(
    type:'GET',
    url: "https://api.imgur.com/3/gallery/hot/viral/0.json",
    data:"format=json&id=123",
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Authorization', 'Client-ID 675ed2e4b9d8b2e');
    },	
    success:function(feed) {
        //document.write(feed);
		console.log(json);
    },
    dataType:'jsonp'
  );	*/
  console.log("start AJAX");	
  $.ajax({
    type: "GET",
	url: "https://api.imgur.com/3/gallery/hot/viral/0.json",
    dataType: "text",
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Authorization', clientId);
    },
    success: function(data) {
   	   console.log("Ajax body call SUCCESS");
        var json = $.parseJSON(data);
		//document.write(json);
		//document.write('trololo');
		//console.log(data.items.length);
        console.log(json);
		
       links = json.data.map(function(item) {
         return item.link;
       })
       isAlbum = json.data.map(function(item) {
         return item.is_album;
       })	
	    albumId = json.data.map(function(item) {
		 return item.id;
		})	   
	    console.log(links[0]);
		var line = '<img src="' + links[0] + '" width="215" height="315" alt="">';
		console.log(line);
		//document.write(line);
		//var url = links[0].substring(1,links[0].length() - 2);
		//var url = links[0].substring(1,8);
		//console.log(url);
		console.log(document.getElementById("Img0").src );	
	    
		for (i=0; i<10; i++) {
		  var idd = "Img" + i;
		  //console.log(idd);
		  if (isAlbum[i]) {  
		     //document.getElementById(idd).src = data.data.images[0].link
             setAlbumImage(idd, albumId[i]);		  
			  //console.log(albumImages);
			/*
            var linkki = albumImages.link; 	
            console.log(linkki);*/		
		   // do nothing
		  }
		  else {
		   document.getElementById(idd).src = links[i];
		  }
	    }	  
    }
});	

function setAlbumImage(pictureSlotId, albumid){
$.ajax({
      type: "GET",
      url: "https://api.imgur.com/3/gallery/" + albumid,
      dataType: "json",
      headers:{
      'Authorization':'clientId'
      },
      success: function(data) {
  	   document.getElementById(pictureSlotId).src = data.data.images[0].link;	
	  // console.log(data.data.images[0].link );
	  // return data.data.images[0].link;
      }
    });	
}
	

/*
function getAlbum(id){

  var url = "https://api.imgur.com/3/gallery/" + id;
  console.log(url);
  $.ajax({
    type: "GET",
	dataType: "json",
	url: url,
    dataType: "text",
    beforeSend: function(xhr) {
        xhr.setRequestHeader('Authorization', 'Client-ID 675ed2e4b9d8b2e');
    },
    success: function(data) {
	  console.log("Ajax function call SUCCESS");
	  console.log(data.images.length);		
        var json = $.parseJSON(data);
        console.log(json);	
	    var albumLinks = json.data.map(function(item) {
         return item.link;
       })
	   console.log(albumLinks);
	}
  });
  console.log("End getAlbum");  
}	*/


</script>

</head>

<body>
<div class="wrapper row1">
  <header id="header" class="clear">
    <div id="hgroup">
      <h1><a href="http://www.infrakit.com">Infrakit</a></h1>
      <h2>Image stealer 2000</h2>
    </div>
  </header>
</div>


<!-- content -->
<div class="wrapper row2">
  <div id="container" class="clear">
    <div id="homepage">
      <section id="latest" class="clear">
        <article class="one_quarter">
          <figure><img id="Img0" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 1</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img1" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 2</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img2" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 3</figcaption>
          </figure>
        </article>
        <article class="one_quarter lastbox">
          <figure><img id="Img3" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 4</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img4" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 5</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img5" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 6</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img6" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 7</figcaption>
          </figure>
        </article>
        <article class="one_quarter lastbox">
          <figure><img id="Img7" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 8</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img8" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 9</figcaption>
          </figure>
        </article>
        <article class="one_quarter">
          <figure><img id="Img9" src="images/demo/215x315.gif" width="215" height="315" alt="">
            <figcaption>Image 10</figcaption>
          </figure>
        </article>		
      </section>
      <section id="shout">
        <p>This ends the section of 10 stolen images and their metadata... thank you and good night!</p>
      </section>
    </div>
  </div>
</div>
<!-- Footer -->
<div class="wrapper row3">
  <footer id="footer" class="clear">
    <p class="fl_left">Copyright &copy; 2016 - All Rights Reserved - <a href="http://www.saunalahti.fi/~jukivis1/omg2.jpg">Juha Kivist√∂</a></p>
  </footer>
</div>
</body>
</html>
